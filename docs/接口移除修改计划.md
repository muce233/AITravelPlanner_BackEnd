# 接口移除修改计划

## 概述

本计划旨在移除 `/api/chat/status` 和 `/api/chat/models` 两个接口，并将模型名称从后端配置文件设置。

## 当前状态分析

### 已移除的接口 ✅

1. **GET /api/chat/status** - 获取API状态和模型列表
   - 位置：`backend/app/routers/chat.py:20`
   - 依赖：`chat_service.get_available_models()`
   - 前端使用：`frontend/src/services/chatService.ts:101`
   - **状态：已完成移除**

2. **GET /api/chat/models** - 获取可用模型列表
   - 位置：`backend/app/routers/chat.py:238`
   - 依赖：`chat_service.get_available_models()`
   - 前端使用：`frontend/src/services/chatService.ts:106`
   - **状态：已完成移除**

### 相关文件影响

**后端文件：**
- `backend/app/routers/chat.py` - 包含接口实现
- `backend/app/schemas/chat.py` - 包含响应模型定义
- `backend/app/services/chat_client.py` - 包含模型获取逻辑
- `backend/docs/detailed_api_specification.md` - API文档
- `backend/docs/api_documentation.md` - API文档

**前端文件：**
- `frontend/src/services/chatService.ts` - 前端服务调用
- `frontend/docs/chat_api.md` - 前端API文档

## 修改计划

### 第一阶段：后端修改

1. **移除接口路由**
   - 从 `backend/app/routers/chat.py` 中删除 `/status` 和 `/models` 路由函数
   - 移除相关的导入和依赖

2. **清理响应模型**
   - 从 `backend/app/schemas/chat.py` 中移除 `APIStatusResponse` 和 `ModelsResponse` 模型
   - 更新 `__all__` 导出列表

3. **配置模型名称**
   - 在 `backend/app/config.py` 中添加模型名称配置项
   - 修改 `backend/app/services/chat_client.py` 中的 `get_available_models` 方法，从配置读取模型列表

### 第二阶段：前端修改

1. **移除接口调用**
   - 从 `frontend/src/services/chatService.ts` 中移除 `getApiStatus` 和 `getModels` 方法
   - 更新相关类型定义

2. **更新前端配置**
   - 将模型列表硬编码到前端配置中，或通过其他方式获取

### 第三阶段：文档更新

1. **更新API文档**
   - 从 `backend/docs/detailed_api_specification.md` 中移除相关接口文档
   - 从 `backend/docs/api_documentation.md` 中移除相关接口文档
   - 从 `frontend/docs/chat_api.md` 中移除相关接口文档

## 已确认的需求

1. **模型名称配置方式**
   - 暂时只支持单个模型
   - 配置项命名参考DeepSeek的API命名规范
   - 前端不会获取模型列表，也不会向后端发送模型名称参数

2. **前端模型获取方式**
   - 前端不可获取模型列表
   - 前端不会向后端发送模型名称参数
   - 模型名称由后端配置决定

3. **配置项命名**
   - 参考DeepSeek API命名：`model`

4. **依赖关系检查**
   - 无其他依赖

## 实施步骤

### 第一阶段：后端配置更新

1. **更新配置文件**
   - 在 `backend/app/config.py` 中添加 `model` 配置项
   - 设置默认模型名称

2. **修改服务逻辑**
   - 更新 `backend/app/services/chat_client.py` 中的模型获取逻辑
   - 使用配置的单个模型名称

### 第二阶段：后端接口移除

1. **移除接口路由**
   - 从 `backend/app/routers/chat.py` 中删除 `/status` 和 `/models` 路由函数

2. **清理响应模型**
   - 从 `backend/app/schemas/chat.py` 中移除 `APIStatusResponse` 和 `ModelsResponse` 模型

### 第三阶段：前端修改

1. **移除接口调用**
   - 从 `frontend/src/services/chatService.ts` 中移除 `getApiStatus` 和 `getModels` 方法

### 第四阶段：文档更新

1. **更新API文档**
   - 移除相关接口的文档内容

## 风险评估

- **低风险**：这两个接口主要用于信息查询，不影响核心聊天功能
- **影响范围**：主要影响前端模型选择和状态显示功能
- **回滚方案**：如果出现问题，可以快速恢复接口实现